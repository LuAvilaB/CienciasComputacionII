<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>츼rboles como Grafos</title>
    <link
      rel="icon"
      href="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Escudo_UD.svg/248px-Escudo_UD.svg.png"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css"
      integrity="sha512-NhSC1YmyruXifcj/KFRWoC561YpHpc5Jtzgvbuzx5VozKpWvQ4nXhPdFgmx8xqexRcpAglTj9sIBWINXa8x5w=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../estilos/general.css" />
    <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
    <style>
      .matrix-container {
        font-family: monospace;
        white-space: pre;
        overflow-x: auto;
        background: rgba(255, 255, 255, 0.1);
        padding: 10px;
        border-radius: 5px;
        margin-top: 10px;
      }
      .info-panel {
        margin-top: 20px;
        padding: 15px;
        background: rgba(0, 0, 0, 0.2);
        border-radius: 8px;
      }
      .highlighted-row {
        background-color: rgba(255, 255, 0, 0.2);
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <div class="cabecera">
     <h1>츼rboles como Grafos</h1>
    <button onclick="handleSave()">游 Guardar</button>
    <button onclick="handleLoad()">游늭 Recuperar</button>
    <button><a href="arboles_grafos.html">Regresar</a></button>   
    </div>
    <article class="divisor">
      <section class="divisor-elem" style="flex: 25%">
        <h2>Operaciones</h2>
        <div class="contenedor operacion">
          <h3>Edici칩n del Grafo</h3>
          <button onclick="addNode()" id="btn-add-node">Agregar Nodo</button>
          <br /><br />
          <button onclick="addEdge()" id="btn-add-edge">Agregar Arista (con Peso)</button>
          <br /><br />
          <button onclick="deleteNode()" id="btn-delete-node">Eliminar Nodo</button>
          <br /><br />
          <button onclick="deleteEdge()" id="btn-delete-edge">Eliminar Arista</button>
          <br /><br />
          <button onclick="clearGraph()" id="btn-clear-graph">Limpiar Grafo</button>
        </div>
        <div class="contenedor operacion">
          <h3>An치lisis</h3>
          <button onclick="calculateMST()">츼rbol Generador M칤nimo</button><br><br>
          <button onclick="calculateSpanningTree()">츼rbol de Expansi칩n</button><br><br>
          <button onclick="showCircuits()">Circuitos</button><br><br>
          <button onclick="showFundamentalCircuits()">Circuitos Fundamentales</button><br><br>
          <button onclick="showCutSets()">Conjuntos de Corte</button><br><br>
          <button onclick="showFundamentalCutSets()">Cortes Fundamentales</button><br><br>
          <button onclick="showAppliedDefinitions()">Definiciones Aplicadas</button>
        </div>
        <div id="stats-panel" class="info-panel" style="display: none;">
            <h3>Propiedades</h3>
            <p id="stats-content"></p>
        </div>

      </section>
      <section class="divisor-elem" style="flex: 75%; overflow-y: auto; max-height: 90vh;">
        <h2>Visualizaci칩n</h2>
        
        <div class="graph-container">
          <h3>Grafo Original</h3>
          <div id="graph" class="graph-canvas" style="height: 400px;"></div>
        </div>
        
        <!-- MST & Complement Section -->
        <div id="mst-section" style="display: none; margin-top: 20px;">
            <div style="display: flex; gap: 20px;">
                <div class="graph-container" style="flex: 1;">
                    <h3>츼rbol Generador M칤nimo (MST)</h3>
                    <div id="mst-graph" class="graph-canvas" style="height: 300px; border: 1px solid #ccc;"></div>
                    <div id="mst-props" class="info-panel" style="margin-top: 5px; font-size: 0.9em;"></div>
                </div>
                <div class="graph-container" style="flex: 1;">
                    <h3>Complemento (Cuerdas)</h3>
                    <div id="complement-graph" class="graph-canvas" style="height: 300px; border: 1px solid #ccc;"></div>
                    <div id="complement-props" class="info-panel" style="margin-top: 5px; font-size: 0.9em;"></div>
                </div>
            </div>
        </div>

        <!-- Circuits Section -->
        <div id="circuits-section" style="display: none; margin-top: 20px;">
            <h3>Circuitos Generados</h3>
            <div id="circuits-container" style="display: flex; flex-wrap: wrap; gap: 10px;">
                <!-- Circuit graphs will be injected here -->
            </div>
        </div>

        <!-- Spanning Tree Section -->
        <div id="spanning-tree-section" style="display: none; margin-top: 20px;">
             <div class="graph-container">
                <h3>츼rbol de Expansi칩n Generado</h3>
                <div id="spanning-tree-graph" class="graph-canvas" style="height: 300px; border: 1px solid #ccc;"></div>
            </div>
        </div>

        <!-- Distance Table Section -->
        <div id="distance-table-section" class="graph-container" style="display: none; margin-top: 20px;">
            <h3>Tabla de Distancias</h3>
            <div id="distance-table-content" class="matrix-container"></div>
            
            <!-- Applied Definitions Panel (Moved here) -->
            <div id="definitions-panel" class="info-panel" style="display: none; margin-top: 10px; background: rgba(255, 255, 255, 0.05);">
                <h3>M칠tricas</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 5px;">
                    <button onclick="showMetric('eccentricity')">Excentricidad</button>
                    <button onclick="showMetric('radius')">Radio</button>
                    <button onclick="showMetric('diameter')">Di치metro</button>
                    <button onclick="showMetric('center')">Centro</button>
                    <button onclick="showMetric('median')">Mediana</button>
                </div>
                <div id="metric-result" style="margin-top: 10px; font-weight: bold;"></div>
                <div id="metric-graph" class="graph-canvas" style="height: 300px; border: 1px solid #ccc; margin-top: 10px; display: none;"></div>
            </div>
        </div>

        <div id="matrix-section" class="graph-container" style="display: none; margin-top: 20px;">
          <h3 id="matrix-title">Matriz</h3>
          <div id="matrix-content" class="matrix-container"></div>
        </div>
      </section>
    </article>

    <script src="../funciones/saveload.js"></script>
    <script src="arboles_como_grafos.js"></script>
    <script>
        function handleSave() {
            const state = captureGraphState(cy);
            saveToFile(state, 'arboles_como_grafos', 'arboles_como_grafos.json');
            clearSimulation('graph');
        }
        
        function handleLoad() {
            loadFromFile((data) => restoreGraphState(data, cy));
        }
    </script>
  </body>
</html>
